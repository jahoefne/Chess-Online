@(user: Option[User])
<script src="@routes.Assets.at("/deps/js/angular.min.js")"></script>
<script src="@routes.Assets.at("/javascripts/chatapp.js")"></script>
<script src="@routes.Assets.at("/javascripts/chatcontroller.js")"></script>
<audio id="chat-notify-sound"preload="auto">
        <source type="audio/mpeg" src="@routes.Assets.at("/sounds/notify.mp3")">
        <source type="audio/wav" src="@routes.Assets.at("/sounds/notify.wav")">
</audio>
<div class="col-md-4" style="margin-top: 20px;" ng-app="chatapp">
    <div class="panel panel-info" id="chatwrapper" ng-controller="ChatCtrl">
        <div class="panel-heading">
            RECENT CHAT HISTORY
        </div>

        <div class="panel-body" style="text-align: left;">
            <ul class="media-list" style="overflow: auto; height: 200px;" id="history">
                <!-- chat Nachrichten -->
                <li class="media" ng-repeat="msg in msgs track by $index">
                    <div>
                        <div class="media">
                            <!-- user Image -->
                            <a class="pull-left" href="#">
                                @if(user != None){
                                <img class="media-object img-circle " style="width: 50px" src="assets/img/user.png" />
                                }else{
                                <img class="media-object img-circle " alt="{{msg.role}}" style="width: 50px" src="@routes.Assets.at("images/{{msg.role}}.png")" />
                                }

                            </a>
                            <!-- Chat Output -->
                            <div class="media-body" id="chattext" style="display: inline;">
                                {{msg.txt}}
                                <br/>
                                <small class="text-muted" style="color: #aaa;">{{msg.role}} | {{msg.time}}</small>
                                <hr style="border-top: 1px solid #fff;"/>
                            </div>
                        </div>
                    </div>
                </li>
            </ul>
        </div>

        <div class="panel-footer">

            <div class="input-group">
                <form id="chatform">
                <input type="text" class="form-control" placeholder="Enter Message" value="" id="text"/>
                    <span class="input-group-btn">
                        <input type="submit" class="btn btn-info" value="SEND"/>
                    </span>
                </form>
                <script>
                    $(function(){
                        $('#chatform').submit(function(){
                            websocket.sendChatMessage($('#text').val());
                            $('#text').val("").focus();
                            return false;
                        });
                    });
                </script>
            </div>

        </div>

    </div>
</div>